<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Sign Up</title>
<link href="websiteDecor.css" rel="stylesheet" type="text/css">
<!--google fonts-->
	<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poiret+One&display=swap" rel="stylesheet">
<!--google fonts end-->
</head>
<body>
	<div id ="formWrapper">
		<div id="formHeader">Sign up</div><br>
		<form name="newAccount" action="account.html">
			<label>Full name:</label>&emsp;<input name="fullName" type="text"><br>
			<label>Username:</label>&emsp;<input name="username" type="text"><br>
			<label>Email:</label>&emsp;<input name="newEmail" type="email"><br>
			<label>Password:</label>&emsp;<input type="password" name="txtPassword"><br>
			<label>Re-enter Password:</label>&emsp;<input type="password" name="txtConfirmPassword"><br>
			<input type="checkbox" onclick="myFunction()">Show Password
			<br><br>
			<input type="submit" id="loginButton" onclick="return Validate(this.form)"><br>
		</form>
		<p>Already have an account? <a href="login.html">Login here.</a></p>
	</div>
</body>
<!--	TODO: clean up script-->
	<script type="text/javascript">
    function Validate(form) {
        var password = form.txtPassword.value;
        var confirmPassword = form.txtConfirmPassword.value;
        if (password != confirmPassword) {
            alert("Passwords do not match.");
            return false;
        }
		var email = form.newEmail.value;
		var re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    var response = re.test(String(email).toLowerCase());
		console.log(response);
		//callAPI(form);
        //return true;
    }
	function myFunction() {
		var x = document.forms["newAccount"]["txtPassword"];
		var y = document.forms["newAccount"]["txtConfirmPassword"];

		if (x.type === "password" && y.type === "password") {
			x.type = "text";
			y.type = "text";
		} else {
			x.type = "password";
			y.type = "password";
		}
	}
	function callAPI(form) {
				console.log("stuff");

//	var a = form.title.value;
//    var b = form.servings.value;
//    var c = form.description.value;
//	var d = form.notes.value;
//	var inputOne = document.getElementsByName('ingredients[]');
//	var inputTwo = document.getElementsByName('instructions[]');
//
//    if (a != null && b != null && c != null && d != null && inputOne[0].value != "" && inputTwo[0].value != "") {
//	var a = "";
//		for (var i = 0; i < inputOne.length; i++) {
//			 a = a + inputOne[i].value + " ";
//		}
//	var b = "";
//		for (var i = 0; i < inputTwo.length; i++) {
//			 b = b + inputTwo[i].value + " ";
//		}
//
//            const obj = [{
//                title: form.title.value,
//                servings: parseInt(form.servings.value),
//                ingredients: a,
//                instructions: b,
//                description: form.description.value,
//                notes: form.notes.value,
//            }];
//            const json = JSON.stringify(obj);
//	console.log(json);
////	console.log(a);
//            const xhttp = new XMLHttpRequest();
//            xhttp.open("POST", "http://localhost:8080/new");
//            xhttp.setRequestHeader("Content-type", "application/json");
//            xhttp.send(json);
//	}
	}
</script>
</html>
